<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>哲学家</title>
    <link>https://helloqb.xyz/</link>
    <description>Recent content on 哲学家</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>©DRay. 本站遵循 CC-BY-NC 4.0 协议</copyright>
    <lastBuildDate>Fri, 21 Aug 2020 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://helloqb.xyz/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>MapStruct 实现 Java Bean 映射</title>
        <link>https://helloqb.xyz/post/2020/0821_mapstruct/</link>
        <pubDate>Fri, 21 Aug 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0821_mapstruct/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0821_mapstruct/ -&lt;h1 id=&#34;介绍&#34;&gt;介绍&lt;/h1&gt;
&lt;p&gt;项目中遇到数据库返回的字段不想全部返回给前端，一个一个 setter 挺麻烦，不够优雅。市面上有挺多映射框架如 &lt;code&gt;Dozer&lt;/code&gt;，&lt;code&gt;Orika&lt;/code&gt;，&lt;code&gt;MapStruct&lt;/code&gt;，&lt;code&gt;ModelMapper&lt;/code&gt;，&lt;code&gt;JMapper&lt;/code&gt; 等，其中 &lt;code&gt;MapStruct&lt;/code&gt; 只是代码生成器，使用纯 Java 的方法调用源对象和目标对象之间进行映射，并非 Java 反射机制，所以其性能最好。&lt;/p&gt;
&lt;h1 id=&#34;实现&#34;&gt;实现&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Maven 依赖&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;...
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;org.mapstruct.version&amp;gt;&lt;/span&gt;1.3.1.Final&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/org.mapstruct.version&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
...
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.mapstruct&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;mapstruct&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${org.mapstruct.version}&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
...
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.8.1&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
                &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
                &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
                &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;annotationProcessorPaths&amp;gt;&lt;/span&gt;
                    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;path&amp;gt;&lt;/span&gt;
                        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.mapstruct&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
                        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;mapstruct-processor&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
                        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${org.mapstruct.version}&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
                    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
                &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/annotationProcessorPaths&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果项目中有用到 &lt;code&gt;lombok&lt;/code&gt; 的话，&lt;code&gt;MapStruct&lt;/code&gt; 也支持，添加如下即可。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;annotationProcessorPaths&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;path&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.projectlombok&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lombok&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${lombok.version}&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/annotationProcessorPaths&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;普通调用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MapStruct&lt;/code&gt; 定义非常简单，因为它完全基于代码生成。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.mapstruct.Mapper&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.mapstruct.Mapping&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#a2f&#34;&gt;@Mapper&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;interface&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;MapStructConverter&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
    MapStructConverter MAPPER &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mappers&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;getMapper&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;MapStructConverter&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
 
    &lt;span style=&#34;color:#a2f&#34;&gt;@Mapping&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;source &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; target &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;orderStatus&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#a2f&#34;&gt;@Override&lt;/span&gt;
    Order &lt;span style=&#34;color:#00f&#34;&gt;convert&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;SourceOrder sourceOrder&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
 
    &lt;span style=&#34;color:#a2f&#34;&gt;@Override&lt;/span&gt;
    DestinationCode &lt;span style=&#34;color:#00f&#34;&gt;convert&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;SourceCode sourceCode&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;调用也很简单。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;DestinationCode destinationCode &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; MapStructConverter&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;MAPPER&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;convert&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;sourceCode&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Spring 注解调用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Spring 项目的话可以如下参数实现依赖注入。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#a2f&#34;&gt;@Mapper&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;componentModel &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;spring&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;interface&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;MapStructConverter&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;@Autowired&lt;/code&gt; 注入调用更方便。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#a2f&#34;&gt;@Autowired&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;private&lt;/span&gt; MapStructConverter mapStructConverter&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

DestinationCode destinationCode &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; mapStructConverter&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;convert&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;sourceCode&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;尾巴&#34;&gt;尾巴&lt;/h1&gt;
&lt;p&gt;其实这个问题困扰我很久了，之前一直想着用多态方式实现，没找到解决方法后也就用一个一个 setter 方式实现，现在想来很懒，以后还是多思考，多找找轮子，尽可能少写垃圾代码。&lt;/p&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.baeldung.com/java-performance-mapping-frameworks&#34;&gt;Performance of Java Mapping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mapstruct.org/documentation/stable/reference/html/&#34;&gt;MapStruct 1.3.1.Final Reference Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mapstruct/mapstruct&#34;&gt;mapstruct github&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
- https://helloqb.xyz/post/2020/0821_mapstruct/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>模拟浏览器另存为下载图片</title>
        <link>https://helloqb.xyz/post/2020/0805_selenium/</link>
        <pubDate>Wed, 05 Aug 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0805_selenium/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0805_selenium/ -&lt;h1 id=&#34;缘由&#34;&gt;缘由&lt;/h1&gt;
&lt;p&gt;开发一个下载图片的爬虫，原网站时不时变动，导致爬虫经常会挂掉，尤其在最终下载图片的环节。想着模拟浏览器另存为的方式可能会更健壮些，不那么容易挂。另外也一直想学习下 Selenium。&lt;/p&gt;
&lt;h1 id=&#34;selenium&#34;&gt;Selenium&lt;/h1&gt;
&lt;h2 id=&#34;1-驱动和环境&#34;&gt;1. 驱动和环境&lt;/h2&gt;
&lt;p&gt;使用的是 Python 环境，Selenium 的安装直接 &lt;code&gt;pip install selenium&lt;/code&gt; 即可。&lt;/p&gt;
&lt;p&gt;浏览器使用的是 Firefox，驱动是 &lt;a href=&#34;https://github.com/mozilla/geckodriver&#34;&gt;geckdriver&lt;/a&gt;。将下载后的文件放入到 Firefox 安装目录下，如 &lt;code&gt;C:\Program Files\Mozilla Firefox&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;环境变量的配置也是 Firefox 安装目录，而不需要到文件&lt;/strong&gt;&lt;/em&gt;。这里坑了好久，一直报找不到驱动的错误，原因是写成了 &lt;code&gt;C:\Program Files\Mozilla Firefox\geckdriver.exe&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&#34;2-请求网站&#34;&gt;2. 请求网站&lt;/h2&gt;
&lt;p&gt;以掘金网站博客 &lt;a href=&#34;https://juejin.im/post/6857394127064006663&#34;&gt;cxuan读者的外包面试之旅&lt;/a&gt; 为例。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;driver &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; webdriver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;Firefox()
driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;https://juejin.im/post/6857394127064006663&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此时没有问题的话，浏览器会自动打开网站。&lt;/p&gt;
&lt;h2 id=&#34;3-滚动加载&#34;&gt;3. 滚动加载&lt;/h2&gt;
&lt;p&gt;此时若直接获取图片，只会获取获取到一两张。因为大多数网站采用 Ajax 方式，页面滚动到图片才加载，所有就需要模拟页面滚动了。&lt;code&gt;execute_script&lt;/code&gt; 方法调用 js 可实现滚动操作。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 获取内容高度&lt;/span&gt;
all_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;return document.body.scrollHeight&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 循环往下滚动，每次滚1024高，间隔1秒&lt;/span&gt;
scroll_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1024&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#008000&#34;&gt;range&lt;/span&gt;(&lt;span style=&#34;color:#008000&#34;&gt;int&lt;/span&gt;(all_height&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;scroll_height)):
    driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;window.scrollTo(0, {0});&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;format(i&lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt;scroll_height))
    time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果遇到无限加载的页面，可以参考 stackoverflow 的 &lt;a href=&#34;https://stackoverflow.com/questions/20986631/how-can-i-scroll-a-web-page-using-selenium-webdriver-in-python&#34;&gt;回答&lt;/a&gt;。代码如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;SCROLL_PAUSE_TIME &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;0.5&lt;/span&gt;

&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# Get scroll height&lt;/span&gt;
last_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;return document.body.scrollHeight&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;while&lt;/span&gt; True:
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# Scroll down to bottom&lt;/span&gt;
    driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;window.scrollTo(0, document.body.scrollHeight);&amp;#34;&lt;/span&gt;)

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# Wait to load page&lt;/span&gt;
    time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(SCROLL_PAUSE_TIME)

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# Calculate new scroll height and compare with last scroll height&lt;/span&gt;
    new_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;return document.body.scrollHeight&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;if&lt;/span&gt; new_height &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; last_height:
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;break&lt;/span&gt;
    last_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; new_height
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;4-查找元素&#34;&gt;4. 查找元素&lt;/h2&gt;
&lt;p&gt;图片加载完成后，就可以定位元素找到图片地址了。这里知识和之前学 Scrapy 的差不多。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定位到文章节点&lt;/span&gt;
image_content &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;find_element_by_css_selector(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;.article&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 获取文章内img标签&lt;/span&gt;
image_elems &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; image_content&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;find_elements_by_css_selector(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;img&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 图片链接存放到list中&lt;/span&gt;
image_list &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; []
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; image_elems:
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# print(i.get_attribute(&amp;#34;src&amp;#34;))&lt;/span&gt;
    image_list&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(i&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get_attribute(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;src&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;5-调用右键&#34;&gt;5. 调用右键&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ActionChains&lt;/code&gt; 方法可调用右键。右键之前需先定位到元素。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;driver &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; webdriver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;Firefox()
driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;https://img-blog.csdnimg.cn/20191104151241389.png&amp;#34;&lt;/span&gt;)
actionChains &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; ActionChains(driver)

body &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;find_element_by_css_selector(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;body &amp;gt; img&amp;#34;&lt;/span&gt;)
actionChains&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;context_click(body)&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;perform()

time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;3&lt;/span&gt;)
driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后就没有然后了。&lt;/p&gt;
&lt;p&gt;Selenium 好像对页面而无法右键菜单进行操作，网上也搜了好久，应该得联合 js 操作，感觉挺麻烦的。后来找到了 &lt;code&gt;PyAutoGUI&lt;/code&gt; 这个库。&lt;/p&gt;
&lt;h1 id=&#34;pyautogui&#34;&gt;PyAutoGUI&lt;/h1&gt;
&lt;p&gt;安装直接 &lt;code&gt;pip install pyautogui&lt;/code&gt; 即可。&lt;/p&gt;
&lt;p&gt;使用超级简单：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;write()&lt;/code&gt; 写入字符&lt;/li&gt;
&lt;li&gt;&lt;code&gt;press()&lt;/code&gt; 按下按键，相当于 &lt;code&gt;keyDown()&lt;/code&gt; 和 &lt;code&gt;keyUp()&lt;/code&gt; 的包装&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hotkey()&lt;/code&gt; 可以传递几个键字符串，这些字符串将按顺序按下，然后以相反的顺序释放&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如火狐的另存为在第三个位置，只需要按方向键下三次，然后回车即可跳出保存对话框。代码如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;press([&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;down&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;down&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;down&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;enter&amp;#39;&lt;/span&gt;])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;由于是图片地址，本 DEMO 其实只需要键入 &lt;code&gt;Ctrl + s&lt;/code&gt; 就可以跳出保存对话框。代码如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 浏览器另存为保存图片&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; image_list:
    driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get(i)

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 图片地址，直接 ctrl+s，不用另存为&lt;/span&gt;
    pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;hotkey(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;ctrl&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;s&amp;#39;&lt;/span&gt;)
    pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 采用时间戳命名，防止名称重复弹出确认框&lt;/span&gt;
    pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#008000&#34;&gt;str&lt;/span&gt;(&lt;span style=&#34;color:#008000&#34;&gt;int&lt;/span&gt;(time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;time() &lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1000&lt;/span&gt;)), interval&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;0.1&lt;/span&gt;)
    pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;press(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;enter&amp;#39;&lt;/span&gt;)

    pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;整体代码如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;selenium&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; webdriver
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;selenium.webdriver.common.keys&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; Keys
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;selenium.webdriver&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; ActionChains
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;pyautogui&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;time&lt;/span&gt;


&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;driver_JJ&lt;/span&gt;():
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 请求网站&lt;/span&gt;
    driver &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; webdriver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;Firefox()
    driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;https://juejin.im/post/6857394127064006663&amp;#34;&lt;/span&gt;)

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 获取内容高度&lt;/span&gt;
    all_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;return document.body.scrollHeight&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 循环往下滚动，每次滚1024高，间隔1秒&lt;/span&gt;
    scroll_height &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1024&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#008000&#34;&gt;range&lt;/span&gt;(&lt;span style=&#34;color:#008000&#34;&gt;int&lt;/span&gt;(all_height&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;scroll_height)):
        driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;execute_script(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;window.scrollTo(0, {0});&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;format(i&lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt;scroll_height))
        time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 定位到文章节点&lt;/span&gt;
    image_content &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;find_element_by_css_selector(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;.article&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 获取文章内img标签&lt;/span&gt;
    image_elems &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; image_content&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;find_elements_by_css_selector(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;img&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 图片链接存放到list中&lt;/span&gt;
    image_list &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; []
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; image_elems:
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;print&lt;/span&gt;(i&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get_attribute(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;src&amp;#34;&lt;/span&gt;))
        image_list&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;append(i&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get_attribute(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;src&amp;#34;&lt;/span&gt;))

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 浏览器另存为保存图片&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;in&lt;/span&gt; image_list:
        driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;get(i)

        &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 图片地址，直接 ctrl+s，不用另存为&lt;/span&gt;
        pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;hotkey(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;ctrl&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;s&amp;#39;&lt;/span&gt;)
        pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)
        &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;# 采用时间戳命名，防止名称重复弹出确认框&lt;/span&gt;
        pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#008000&#34;&gt;str&lt;/span&gt;(&lt;span style=&#34;color:#008000&#34;&gt;int&lt;/span&gt;(time&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;time() &lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1000&lt;/span&gt;)), interval&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;0.1&lt;/span&gt;)
        pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;press(&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;enter&amp;#39;&lt;/span&gt;)

        pyautogui&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;)

    driver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;close()


&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;main&lt;/span&gt;():
    driver_JJ()


&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;if&lt;/span&gt; __name__ &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;:
    main()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;关联阅读&#34;&gt;关联阅读&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://pyautogui.readthedocs.io/en/latest/keyboard.html&#34;&gt;PyAutoGUI文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://selenium-python-zh.readthedocs.io/en/latest/index.html#&#34;&gt;Selenium with Python中文翻译文档&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
- https://helloqb.xyz/post/2020/0805_selenium/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>进一步了解 RabbitMQ 跨语言通讯</title>
        <link>https://helloqb.xyz/post/2020/0728_rabbitmq/</link>
        <pubDate>Tue, 28 Jul 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0728_rabbitmq/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0728_rabbitmq/ -&lt;h1 id=&#34;进一步了解&#34;&gt;进一步了解&lt;/h1&gt;
&lt;p&gt;开发中遇到了 RabbitMQ 丢失的情况，另外一端一直说是我的 Java 端的问题，无奈做了验证，本文的主要内容也就是这个：如何验证消息发送成功。&lt;/p&gt;
&lt;h1 id=&#34;配置&#34;&gt;配置&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;pom.xml&lt;/code&gt; 文件中添加依赖。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-amqp&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;application.yml&lt;/code&gt; 文件中添加配置开启确认。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;spring&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;rabbitmq&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;host&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;192.168.0.102&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;port&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;5672&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;username&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;admin&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;password&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;admin&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;virtual-host&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;sl&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;publisher-confirm-type&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;correlated&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;publisher-returns&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;template&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;mandatory&lt;/span&gt;:&lt;span style=&#34;color:#bbb&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#bbb&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;重写方法&#34;&gt;重写方法&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;RabbitTemplate.ConfirmCallback&lt;/code&gt; 确认消息是否到达交换机， &lt;code&gt;RabbitTemplate.ReturnCallback&lt;/code&gt; 确认消息是否到达队列中。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.slf4j.Logger&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.slf4j.LoggerFactory&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.Message&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.rabbit.connection.CorrelationData&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.rabbit.core.RabbitTemplate&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.beans.factory.annotation.Autowired&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;javax.annotation.PostConstruct&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#a2f&#34;&gt;@Component&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;CustomRabbitSend&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;implements&lt;/span&gt; RabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ConfirmCallback&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; RabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ReturnCallback&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;final&lt;/span&gt; Logger LOG &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; LoggerFactory&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;getLogger&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;CustomRabbitSend&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@Autowired&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;private&lt;/span&gt; RabbitTemplate rabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@PostConstruct&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;init&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(){&lt;/span&gt;
        rabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setConfirmCallback&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
        rabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setReturnCallback&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@Override&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;confirm&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;CorrelationData correlationData&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;boolean&lt;/span&gt; b&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; String s&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//到达Exchange交换机，会调用此方法
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;(!&lt;/span&gt;b&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
            LOG&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;error&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;消息发送异常!&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
        &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
            LOG&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;info&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;发送者收到确认，correlationData={} ,ack={}, cause={}&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; correlationData&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;getId&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(),&lt;/span&gt; b&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; s&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
        &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@Override&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;returnedMessage&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;Message message&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;int&lt;/span&gt; i&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; String s&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; String s1&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; String s2&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//没有到达Queue队列中，会调用此方法
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;        LOG&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;info&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;returnedMessage ===&amp;gt; replyCode={} ,replyText={} ,exchange={} ,routingKey={}&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; i&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; s&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; s1&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; s2&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;交换机和队列绑定&#34;&gt;交换机和队列绑定&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;Exchange&lt;/code&gt; 交换机需要通过 &lt;code&gt;routingKey&lt;/code&gt; 才能将消息传递到 &lt;code&gt;Queue&lt;/code&gt; 队列中（本文只用到 &lt;code&gt;direct&lt;/code&gt; 类型，其实无需绑定，&lt;code&gt;fanout&lt;/code&gt;、&lt;code&gt;topic&lt;/code&gt; 类型才需要）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.context.annotation.Configuration&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.Binding&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.BindingBuilder&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.DirectExchange&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.Queue&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.context.annotation.Bean&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;


&lt;span style=&#34;color:#a2f&#34;&gt;@Configuration&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;DirectRabbitConfig&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//队列
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;@Bean&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; Queue &lt;span style=&#34;color:#00f&#34;&gt;customDirectQueue&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; Queue&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testQueue&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//Direct交换机
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;@Bean&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; DirectExchange &lt;span style=&#34;color:#00f&#34;&gt;customDirectExchange&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DirectExchange&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testDirectExchange&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//将队列和交换机绑定
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a2f&#34;&gt;@Bean&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; Binding &lt;span style=&#34;color:#00f&#34;&gt;bindingDirect&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;return&lt;/span&gt; BindingBuilder&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;bind&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;customDirectQueue&lt;span style=&#34;color:#666&#34;&gt;()).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;to&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;customDirectExchange&lt;span style=&#34;color:#666&#34;&gt;()).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;with&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testRoutingKey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;发送&#34;&gt;发送&lt;/h1&gt;
&lt;p&gt;传递 &lt;code&gt;CorrelationData&lt;/code&gt; 类，包含消息唯一标识（&lt;code&gt;AmqpTemplate&lt;/code&gt; 类无法传递，之前一直用的这个，死活找不到方法）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;
&lt;span style=&#34;color:#a2f&#34;&gt;@Component&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;TestScheduled&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@Autowired&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;private&lt;/span&gt; RabbitTemplate rabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@Scheduled&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;fixedDelay &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; 3000&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;errorSpiderRerun&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(){&lt;/span&gt;
        String content &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;test rabbit and now &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;+&lt;/span&gt; LocalDateTime&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;now&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;toString&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;();&lt;/span&gt;
        CorrelationData cId &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; CorrelationData&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;unique key&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
        rabbitTemplate&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;convertAndSend&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testDirectExchange&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testRoutingKey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; content&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; cId&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;接收&#34;&gt;接收&lt;/h1&gt;
&lt;p&gt;用 &lt;code&gt;Message&lt;/code&gt; 类接收。目前我用的是 String 传输，可以配置成 JSON 传输更好些。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;com.alibaba.fastjson.JSON&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;com.alibaba.fastjson.JSONException&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;com.alibaba.fastjson.JSONObject&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.slf4j.Logger&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.slf4j.LoggerFactory&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.core.Message&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.amqp.rabbit.annotation.RabbitListener&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.beans.factory.annotation.Autowired&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#a2f&#34;&gt;@Component&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;CustomRabbitReceiver&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;final&lt;/span&gt; Logger LOG &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; LoggerFactory&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;getLogger&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;CustomRabbitReceiver&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;

    &lt;span style=&#34;color:#a2f&#34;&gt;@RabbitListener&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;queues &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;testQueue&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#b00040&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;listen&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;Message message&lt;span style=&#34;color:#666&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;{&lt;/span&gt;
        String body &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; String&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;message&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;getBody&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;());&lt;/span&gt;
        LOG&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;info&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;receiver from python:&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;+&lt;/span&gt; body&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;谁的锅&#34;&gt;谁的锅&lt;/h1&gt;
&lt;p&gt;加了验证后，Java 端没有丢失，另一端消息也确实拿掉了，研究可能是多线程的问题，之前用的是 &lt;code&gt;pika&lt;/code&gt;，官方说多线程不安全，后续可以改为 &lt;code&gt;rabbitpy&lt;/code&gt; 更安全。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;关联阅读&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://rabbitpy.readthedocs.io/en/latest/index.html#&#34;&gt;rabbitpy documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://helloqb.xyz/post/2020/0515_rabbitmq/&#34;&gt;RabbitMQ 实现跨语言通信&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/qq_35387940/article/details/100514134&#34;&gt;Springboot 整合RabbitMq ，用心看完这一篇就够了&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.spring.io/spring-amqp/reference/html/&#34;&gt;Spring AMQP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
- https://helloqb.xyz/post/2020/0728_rabbitmq/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>耳机初烧之旅</title>
        <link>https://helloqb.xyz/post/2020/0713_headphone/</link>
        <pubDate>Mon, 13 Jul 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0713_headphone/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0713_headphone/ -&lt;h1 id=&#34;入门穷烧&#34;&gt;入门穷烧&lt;/h1&gt;
&lt;p&gt;大三，不知何事引起，对耳机产生兴趣，可能是看到论坛们一堆 &lt;em&gt;&lt;strong&gt;高音甜，中音准，低音沉&lt;/strong&gt;&lt;/em&gt; 的分析，感觉他们从里面获得了很大的满足，所以也想尝试一下。&lt;/p&gt;
&lt;p&gt;鉴于一直以来耳机不都是十块钱的印象，只能将价位定位在了一两百。瞄准两款 &lt;code&gt;AKG420&lt;/code&gt; 和 &lt;code&gt;JVC HA-S500&lt;/code&gt;。&lt;code&gt;HA-S500&lt;/code&gt; 在网上的形容词是 &lt;em&gt;&lt;strong&gt;白菜神器&lt;/strong&gt;&lt;/em&gt;，说外国某论坛关于此耳机盖了很多层楼。&lt;code&gt;AKG420&lt;/code&gt; 名声更大，知乎初烧推荐里几乎都有这款。巧了，宿舍串门的时候正好看到同学在用，试了下，佩戴舒适，低音有氛围，颜值低调却在线，很喜欢，现在想来还是想拥有一部。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://4fexvw.dm.files.1drv.com/y4mLa19I26G29GMz6xYVSKU70grkdx10MkEQ2e2Rx-pWxUJeMH1nVxg87hSv6FEOXzSCh8C_UG8SblqW1w3J5VR1msmWwiXo1e8W2WwCtUu5iXKSp8SDIvvCrOJDraKo342Xgj57fQgRlLzvAAXOcHiZ5ZcZnahjLKBQspfNqWzuvVLiXhphQ6k-65MvZA1GaWGdP50NIzmFZLdEw8mwVqMxA?width=660&amp;height=422&amp;cropmode=none&#34; width=&#34;660&#34; height=&#34;422&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;可能是得不到的永远在骚动，我最终选择了 &lt;code&gt;HA-S500&lt;/code&gt; 。怀着无比激动的心情收到后，很爱惜，很享受，什么高音低音的也瞬间都感觉有了，经常晚上关灯听很久。现在想来，脑放的成分居多，此耳机声音同价位一般，唯一可以吹的是它的质量，拿到手里感觉就是特别结实，一度让我对日本制造印象特别好。现在为止已经换了两个耳套，它仍然硬硬的，躺着抽屉里，等我偶然间想起。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://4vexvw.dm.files.1drv.com/y4mlVGdYB2Pl1VROA8AYOcm043MZ7V3fGDmJpFF989ZhyXyAT-AR7smIHDulwJaN9OHeRe3Xa7LFYxYyKOqkuxqgmdadoRlyNiGKwZhtXZikFgbXjuVibAdFcr__rGJhbwH__sw1HLkJ_qxrMXOCYwrVIkysNYoTAlnrFRSpXv03PQzBjC3Obh9BA8PWT_4dT2gM1B5F9FTZhScWJclKK-4dQ?width=719&amp;height=1500&amp;cropmode=none&#34; height=&#34;500&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;后来又买了 &lt;code&gt;潜99&lt;/code&gt; 和 爱华 &lt;code&gt;AIWA HP-M38&lt;/code&gt;，&lt;code&gt;潜99&lt;/code&gt; 入耳式的没啥印象，&lt;code&gt;HP-M38&lt;/code&gt; 还有些印象，因为很轻，佩戴很舒服，而 &lt;code&gt;HA-S500&lt;/code&gt; 特别夹耳。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://2lexvw.dm.files.1drv.com/y4mcGknTQ8z-xUK9_S96Ts1lpErHF3krrlcLu6a5sC5JZnFOTejX0p7HvcCd6TnDmrcDZ94NmLpwB-xJsHD_NuPujWTI1WpFEeEvtlT6B1_8PVFhakkqlzE1qO0MV1-QiEo8X1N7n9JroMzEJV_SmFzCX3UMnmLa_2JkAxkYSui0uUp_Wi7BxZeLhU1navnGOmA_Vlujr3BumpH6S3xosxNyg?width=660&amp;height=490&amp;cropmode=none&#34; height=&#34;400&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;h1 id=&#34;再烧&#34;&gt;再烧&lt;/h1&gt;
&lt;p&gt;又不知何事引起，想再烧下耳机，也了解到好耳机真的需要上放，而上放对于我这种简约派来说想想都麻烦，需要把歌曲导进导出的，没法直接用手机听。所以我下了个决定，只直推试听，不行就不再烧。
有了工资后，定位当然也高了，盖得排行里，锁定了接近三千价位的歌德 &lt;code&gt;SR325e&lt;/code&gt;。但三千毕竟不少，淘宝上找到个商家可以试听，每天 50，遂下单。等待期间看到了魅族 HiFi 解码耳放这么个小玩意，说能使手机推力变大，也下单了。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://5lexvw.dm.files.1drv.com/y4m0rNlBvR8r7bVyzEn3ho03Nn67wkCGEzbALRyiMuljHlBpzqjiWDPBbhA5nAZjcO7LawvaqEcxGCXCX02hUfywr-IIBKEbgjYp3Pi8IN3ciIcrrDR4zXeUZNmj0t7NFmSWwgiOqgdlPFlda7pdZFKICC8o3kW7UN58jDC5JAtUjAz09M7Y0tYqBb1tDRxx-YlnxObRtIeNxxALqk-fBWRew?width=1024&amp;height=1024&amp;cropmode=none&#34; height=&#34;500&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;拿到后，没感觉多少惊喜，有效果，但不值得花三千，算了，退单，再也不烧。&lt;/p&gt;
&lt;p&gt;可心里总是还有欲望，别人怎么能听得这么爽，我是木耳吗，难道真得上放才行?&lt;/p&gt;
&lt;p&gt;退单后，依旧在论坛贴吧瞎逛，忽然发现了个新词 &lt;code&gt;USB独占&lt;/code&gt;。大概意思是：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Android 系统为了兼容不同 APP 音频同时输出，需要使用 Mixer(混音模块)将这些声音混在一起后输出，Android 混音输出的采样率固定为 48k，如果某个 APP 输出的声音格式和混音输出结果不一样，就需要 SRC（采样率转换），这对音质是一个大大的损伤。而在独占模式下，APP 会把数字信号直接送给 USB 系统，通过 USB 接口送给数字耳机。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个理论又勾起了我的欲望。但是 &lt;code&gt;SR325e&lt;/code&gt; 已经被退了，想来好久都没买耳机了，再买一个耳机用吧，等着 &lt;code&gt;HA-S500&lt;/code&gt; 用坏怕是不可能了。&lt;/p&gt;
&lt;p&gt;逛了一番后，买了 &lt;code&gt;HIFIMAN SUNDARA&lt;/code&gt;。我靠，真的是独占的原因！！！&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://21exvw.dm.files.1drv.com/y4ml8A0L8Daikc_GPGZI0mNmQNPVcPKQ9TYfqKIr4ncoqYgApSZ8h3moU2siNU3BpVIr_mWB7WeX8i8Azr0--p7ncpECxGv9_0RW5Y4IMjBsyBmn9FJ9nI-IlGNzOCeHmGp-DcI8DgUeWPYjhOJpeSJPCaPZbAqQ6NEb9T1vWuMwmuYTtKMsWu4g0mIdOCGXU2GsFumh_Y7LUi-aP62tp14bA?width=800&amp;height=800&amp;cropmode=none&#34; height=&#34;500&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;欲望被彻底勾起，先是觉得 &lt;code&gt;SUNDARA&lt;/code&gt; 低频差点劲，二手了 &lt;code&gt;DT990&lt;/code&gt; 和 &lt;code&gt;DT1350&lt;/code&gt;，&lt;code&gt;DT1350&lt;/code&gt; 山洞音没感觉，&lt;code&gt;DT990&lt;/code&gt; 解析好，人声远，低频足，但齿音更重。不行，还是不够完美。接着逛，reddit 上 &lt;code&gt;HD58X&lt;/code&gt; 呼声很高，国内竟然没有专卖店，学了下海淘，竟然比想象中简单的多。一个月后才拿到手，没有期待的好，但也有所提升。&lt;/p&gt;
&lt;p&gt;闲鱼这玩意不能逛，尤其是耳机这种不嫌多的产品，这不一开始的 &lt;code&gt;SR325e&lt;/code&gt; 降到了 900！这还不抢！卖家也热情，实话实说，头梁处断了（后面淘宝 50 块换了个新的），也想退烧了，所以卖的低点，又说 &lt;code&gt;SR325e&lt;/code&gt; 不上放没法听。&lt;/p&gt;
&lt;p&gt;一句话，又海淘了个 &lt;code&gt;Atom 耳放&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3fexvw.dm.files.1drv.com/y4mdas9dW8lyZsA8KwnovQagDWvGofsnJXT1QAamKg5euKFeyMBLaCXqJ9SnnWJ6GY2V83vaDwkVlaoFXfS16nFZFXTKAl9pVQPCibS9O6XeF-Z5p1RxbbF89Ro289Xvc_5YJO12aF8QVmFCIY9DLx-hhXOSBbkhirLLxH_u0WiJ50w31AtpHz3bRlDKnRmKeKZWT6BTCx13SFPOeGbp1q7cg?width=2124&amp;height=1131&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;耳放确实得要有。&lt;code&gt;SUNDARA&lt;/code&gt; 在 reddit 论坛里很火的，但我初听时除了声场大些其他没啥感觉，低音不够，接上耳放后低音瞬间好多了。&lt;code&gt;SR325e&lt;/code&gt; 接上后解析也更好，声音更凝聚。但还是一直的问题，没期待的那么惊喜，没论坛里烧友那么有感触&amp;hellip;&amp;hellip;&lt;/p&gt;
&lt;p&gt;忽然想到了一直不坏的 &lt;code&gt;HA-S500&lt;/code&gt;，拿起来听了下，我靠！也太难听了吧，声音像糊了层纸一样。顿悟：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;每一次的耳机的提升，亦或是器材的变化虽让音质提升微小，但最后汇集起来，确实是一种让人回不去的听觉享受。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;最后的最后，我还是退烧了，耳机带来的提升远远不如歌曲本身，何况我也不是很喜欢听歌（这也是我一直想打自己的原因，MD 不听歌你烧个毛啊）&amp;hellip;&amp;hellip;当然了，由奢入俭难，想要回到几十块是不可能了，后面可能哪个耳机火了，闲鱼会试听玩玩。&lt;/p&gt;
&lt;h1 id=&#34;聊聊听感&#34;&gt;聊聊听感&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;AKG420&lt;/code&gt; &amp;amp; &lt;code&gt;JVC HA-S500&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;再选一次的话，我会选择 &lt;code&gt;AKG420&lt;/code&gt;，它佩戴更舒服些，颜值也比 &lt;code&gt;HA-S500&lt;/code&gt; 高，&lt;code&gt;HA-S500&lt;/code&gt; 摸着结实，耐操。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;HIFIMAN SUNDARA&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;HIFIMAN 家的东西真是跳水王，但在国外却深受欢迎，reddit 上经常有它的身影，获奖也很多。佩戴舒适，颜值喜欢，初听感受声场大，但低音欠缺些，总感觉没推好，果然上放后好很多。可能这也是跳水的原因，上放才能出好声，它却打着直推的标签。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Beyerdynamic DT990&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;初听惊艳，声场大，人声远，解析好，但人声太刺了，听了会就受不了。上放后好多了，但还是有点刺，听说猛煲有改善。还有一点挺好，不夹眼镜。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://51exvw.dm.files.1drv.com/y4mUgrQykrAA1UBC4MmMmtZRxoghduuvsu4iWpSwLETHaoyWLeX4V20s3DKGJTHRTdsB0rZa3FZl5mulAAkooAo2VLzg9Bk0_q2zZLv8CetI79fOS20w6a6ZX2dReBpuS25I-pvLxKM01chitf1Ebwnmb1nP9YUtcWWkVkKek05lDj_EeUXvCr6pLZwuALG0RMf1wpWtAnaRfIKD30_eCwoZw?width=1024&amp;height=822&amp;cropmode=none&#34; height=&#34;400&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Beyerdynamic DT1350&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;山洞音，官方价 1700，闲鱼 700 入的，再卖 200&amp;hellip;&amp;hellip;MD 不卖了。隔音好，易推，佩戴舒适，没必要贱卖。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://2lfgpq.dm.files.1drv.com/y4mLgpSJA1t_w0PnMI-Y7fJHhwklQq2z820cBkyouHfOKnaWBY4x6o8biHg8Jl4b2ZQp1CyjF2YFqCol-U4Y4s9Auhm2KXbU_NYOhNpHOMS1LePMYbz9fyjqAX-8nU-hWXrdP6GjWlXm-SBEj7C-EG3psqs1Wkq7jSNEVJ3i4X4Bft8_wPvDnOvrjiFqwrUwMhhxiua8GPCPkYxeTNtaEjqrg?width=1565&amp;height=1715&amp;cropmode=none&#34; height=&#34;400&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;MASSDROP X SENNHEISER HD58X&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MASSDROP X SENNHEISER HD 58X JUBILEE 联名款。Youtube 上有个 UP 主评测说就是 &lt;code&gt;HD660S&lt;/code&gt; 加了层纸，而 &lt;code&gt;HD660S&lt;/code&gt; 是三千价位的，它一千价位，可以说性价比极高了。入手后，却没什么惊喜，可能我的耳放推力不足。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://21fgpq.dm.files.1drv.com/y4mZZwmP3xkGzDJ9tW3wAYueBrg2WhQz01dwVQWtg3oyy8Uh7VY1IkSzzTDW3FrqTHDVyzzS7HjzTnwVyEJO5R0gOysOj-eEDUTJlKssrrcODkmflN9Uj4MuOCr0dRhpdQ7abh15M5upFilY9K3teCGtvNINPUg3FrahT5Vxz_GlStpFD9wixZLt07uAoFjOHg_zzUntjgKuWK4I_3R3OZrwg?width=1024&amp;height=683&amp;cropmode=none&#34; height=&#34;400&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Grado SR225e&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;卖家说人声好，初听时起鸡皮疙瘩了。女声渲染的是不错，但我觉得一般，可能我不好这口吧。&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://3vfgpq.dm.files.1drv.com/y4mCG8O2KWURj3Bjjvk_0KHySiuuOourBM1FO0kMWbTDgEiDOCHDdVheQ5PxQuC_TXj7pAlC7vHMPYMvTzW3olzQKZ31wGp0qX1KGNVCzuRjrra2O4xn6zSx_GMyisU0GOAKOlu6SoZ7g1hOQFaPG9BOT1q0Hu9GjStTjXXsOoTIPYn3sIuDFBocD1vvuAWOCMmYYgbrpSLO3oCbUGLZBXxIg?width=638&amp;height=660&amp;cropmode=none&#34; height=&#34;400&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Grado SR325e&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;最钟意的一款，声音热情洋溢，摇滚的那股劲，就它声出的好听，其它的都稍微欠缺些。直推好，上放更好。&lt;/p&gt;
&lt;h1 id=&#34;最终搭配&#34;&gt;最终搭配&lt;/h1&gt;
&lt;p&gt;最终搭配：APP（USB Audio Player PRO）+ 解码（MEIZU HIFI DAC PRO）+ 耳放（JDS LABS ATOM AMP）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;USB Audio Player PRO&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;用于实现 USB 独占，谷歌商店 9 美元，小贵，可用海贝音乐代替。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;MEIZU HIFI DAC PRO&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;很强大！它让手机也能玩得转 HiFi，配合 Atom 耳放可以将性能发挥到极致。我是看了削腚恶的文章 &lt;a href=&#34;https://zhuanlan.zhihu.com/p/94991395&#34;&gt;魅族HiFi解码耳放与魅族HiFi解码耳放Pro评测&lt;/a&gt; 种草的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“魅族线与魅族线Pro都是音频性能非常优异的解码耳放转接线；&lt;/p&gt;
&lt;p&gt;魅族厂商完全没有虚标参数；
魅族线的实际推力为80mW@32Ω，13mW@300Ω；
魅族线Pro的实际推力为100mW@32Ω，13mW@300Ω；
魅族线与魅族线Pro的实际失真都&amp;lt;0.0002% (1kHz，300Ω负载)
魅族线与魅族线Pro的实际信噪比和动态范围都&amp;gt;123dBA (300Ω负载)&lt;/p&gt;
&lt;p&gt;考虑到二者的价格，可以算是性价比搅乱市场的产品，建议根据实际情况，酌情购买。&lt;/p&gt;
&lt;p&gt;魅族今年先后发布的HiFi解码耳放、HiFi解码耳放Pro告诉我们，再没落的手机厂的供应链控制，研发实力，品控质检水平，也不是小众的HiFi厂家可以望其项背的。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://5lfgpq.dm.files.1drv.com/y4mcJn1MvzY4BfOXq405V6xEbMKqezwek-MAxODlkhaUDtg8Madvff1UgV4yYOmxMZo3APDKF7AmvDr2eLKXD1KAKmS_Z3UOVWtXPcxJACDZMM3auYU96ONgNa1oWGe10uWlBYYdHwNvT58M11ecbnoL6g5gW8AH4bN5Kg9ShOhntjBXKzHV0AEZCQdSKxSmvn2HBJwXqPFHABLDH6fJjbRiQ?width=2814&amp;height=1357&amp;cropmode=none&#34; /&gt;&lt;/center&gt;&lt;p&gt;
&lt;h1 id=&#34;软件&#34;&gt;软件&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;无损歌曲&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;QQ 音乐和网易云音乐上下载的无损歌曲都进行了加密，第三方无法播放。好在不难，Github 上可以搜到大神写的转换工具。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;mp3tag&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;强迫症的可通过此软件修改歌曲元数据，添加封面，更改专辑名啥的。&lt;a href=&#34;https://www.mp3tag.de/index.html&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;footbar&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;flac 格式个人觉得最好，cue 有时候识别不了，wav 又没法写入标签。通过 footbar 都可以转成 flac 格式。&lt;a href=&#34;https://www.foobar2000.org/&#34;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;后续2020-08-06&#34;&gt;后续（2020-08-06）&lt;/h1&gt;
&lt;p&gt;没到一个月就打脸了，入了拓品家的 &lt;code&gt;Topping E30&lt;/code&gt;&amp;hellip;&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://rt3upw.dm.files.1drv.com/y4muGjkUE_nl0MlUXnEF7iEVdmzQ2tz3G6HNjqD_XuuvC9CawUWjn2KqiLXRz-VNKl7RLjUspiBoq1Jf9AKlaSvC41aQ6Pnducf6nXORsr3c-iU97kcQslJ-qjGviYQjAExNgg60WRKc-gUuuWeGMuqiesZvLg0O-bZeSwN7JfgzRuHm87rKML2GbEiu1oTZ297wLiv-BCXv458aNij5TqeWw?width=1024&amp;height=770&amp;cropmode=none&#34;/&gt;&lt;/p&gt;
&lt;p&gt;起初以为那种台机必须把歌曲先导入进去才能听，觉得很麻烦。后来了解到可以用手机或者电脑作为输入源的。还有我自己没有外出听歌的习惯，算了，抱着砖听就抱着砖听吧。&lt;/p&gt;
&lt;p&gt;把魅族线换成 E30 后惊喜了一晚上，听感又上升了两个台阶，有些歌曲听到了之前没注意的细节，至此，我觉得应该发挥了我这款歌德耳机所有的潜力了。&lt;/p&gt;
&lt;p&gt;后续再烧的动力，想到两个方面，一是手机连着解码器的线挺碍事的，边听边玩手机时拖着线不太方便，接口处还容易松动，后续想要尝试下蓝牙解码器。二是现在这套装备我觉得能推得动大部分耳机了，想要尝试下难推的耳机，之前一直以易推作为选耳机的标准的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最后想说的是，还挺烧钱的，克制点，老弟！&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&#34;后续2020-08-17&#34;&gt;后续（2020-08-17）&lt;/h1&gt;
&lt;p&gt;没到半个月又打脸了，入了拓品家的 &lt;code&gt;BC3&lt;/code&gt;&amp;hellip;&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://p93upw.dm.files.1drv.com/y4mD4m01PCQrODGUigK2FGjEaN_u5aau9jCvHzqECHLfphSS_VFlACqjzTih2OvP0ZwXuCz2P2EeCQswGxZYNNRx7PAvwcOQiAW2fp8ShxNQkqTD5lwHJC2RgJENsEuZYkmngcopxOXVA5B5d2p0c2V21zWPuuXBbiNUyhNx6O4pt9wv3MvYhpUl0QtcJ1Gxw0P45lGgU8SCiA93iTCE_GKxA?width=753&amp;height=1024&amp;cropmode=none&#34; height=&#34;600&#34; /&gt;&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;因为手机连接 DAC 时得拖着挺长的一根线不够方便，想尝试下蓝牙，经了解，LDAC 传输虽然是有损传输，但是已经够了。连接后，无奈发现，虽然我的手机支持外接 DAC 自动切换采样率，但是 LDAC 模式下却 SRC 了。&lt;/p&gt;
&lt;p&gt;SRC 其实对音质的损耗很大，之前没在意，现在听来确实有挺大差距。网上搜了下，索尼的 &lt;code&gt;Music Center&lt;/code&gt; 可以解决 SRC 问题，但是我的手机只成功过两次，经常是切换了采样率，但是播放却变得异常缓慢，暂先搁置吧，等着 APP 兼容或者手机兼容。&lt;/p&gt;
- https://helloqb.xyz/post/2020/0713_headphone/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>使用 BigDecimal 和 DecimalFormat 计算</title>
        <link>https://helloqb.xyz/post/2020/0707_decimal/</link>
        <pubDate>Tue, 07 Jul 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0707_decimal/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0707_decimal/ -&lt;h1 id=&#34;介绍&#34;&gt;介绍&lt;/h1&gt;
&lt;p&gt;本文主要记录下 &lt;code&gt;BigDecimal&lt;/code&gt; 和 &lt;code&gt;DecimalFormat&lt;/code&gt; 类的用法，方便下次使用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BigDecimal&lt;/code&gt; 可以更精确的进行小数点运算。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DecimalFormat&lt;/code&gt; 可以更好的进行与科学计算法之间的换算和保留有效数字。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;bigdecimal&#34;&gt;BigDecimal&lt;/h1&gt;
&lt;h2 id=&#34;加减乘除等&#34;&gt;加减乘除等&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;java.math.BigDecimal&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;add&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//加
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;subtract&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//减
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;multiply&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//乘
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;divide&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;),&lt;/span&gt; 2&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//除
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;max&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//最大值
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;3.1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;compareTo&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//比较
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;四舍五入&#34;&gt;四舍五入&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_UP&lt;/code&gt;：不降低计算值的大小(和正负无关)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//不降低计算值的大小（不考虑负号）
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_DOWN&lt;/code&gt;：不增加计算值的大小(和正负无关)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//不增加计算值的大小（不考虑负号）
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_CEILING&lt;/code&gt;：不降低值的大小&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//不降低值的大小
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_CEILING&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_CEILING&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_CEILING&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_CEILING&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_FLOOR&lt;/code&gt;：不增加计算值的大小&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//不增加计算值的大小
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_FLOOR&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_FLOOR&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_FLOOR&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_FLOOR&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_HALF_UP&lt;/code&gt;：四舍五入(和正负无关)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//四舍五入(和正负无关)
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_UP&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_HALF_DOWN&lt;/code&gt;：五舍六入(和正负无关)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//五舍六入(和正负无关)
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_DOWN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BigDecimal.ROUND_HALF_EVEN&lt;/code&gt;：左边奇数四舍五入，左边偶数五舍六入&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//左边奇数四舍五入，左边偶数五舍六入
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//当在一系列计算中重复应用时，该模式可将累积误差最小化
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.345&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.34
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.346&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.35
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.355&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.36
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;1.356&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.36
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.355&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.36
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;-1.356&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;setScale&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; BigDecimal&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;ROUND_HALF_EVEN&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt; &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//-1.36
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用 &lt;code&gt;new BigDecimal&lt;/code&gt; 的字符串构建，不要用 doubel 类型，doule 类型用 &lt;code&gt;BigDecimal.valueOf()&lt;/code&gt; 构建。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;decimalformat&#34;&gt;DecimalFormat&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;#&lt;/code&gt;：表示只要有可能就把数字拉上这个位置&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#00f;font-weight:bold&#34;&gt;java.text.DecimalFormat&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;12340&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//12340
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.23
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;2323423&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.2323
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;0&lt;/code&gt;：表示如果位数不足则以 0 补充&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.0000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;12340&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//12340.0000
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.0000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.2300
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;E&lt;/code&gt;：科学计数&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####E0&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;0&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;00000234234&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//2.3423E-6
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####E0&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;132459999&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//1.3246E8
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####E0&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;6&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//6E0
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;%&lt;/code&gt;：百分比&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.####%&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;0&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//23%
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;new&lt;/span&gt; DecimalFormat&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;#.0000%&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;0&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;  &lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;//23.0000%
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;- https://helloqb.xyz/post/2020/0707_decimal/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>个人笔记 - Jupyter 笔记汇总</title>
        <link>https://helloqb.xyz/post/2020/0615_jupyter/</link>
        <pubDate>Mon, 15 Jun 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0615_jupyter/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0615_jupyter/ -&lt;p&gt;Jupyter 作为 Python 笔记相当不错，可以实时运行代码。在此备份。其中 &lt;code&gt;html 版本&lt;/code&gt; 用于在线浏览，&lt;code&gt;ipynb 版本&lt;/code&gt; 用于导出到 Jupyter 中运行。&lt;/p&gt;
&lt;h1 id=&#34;函数&#34;&gt;函数&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;加载 sklearn 公共数据集&lt;/li&gt;
&lt;li&gt;返回 df2 按照 df1 的 id 排序&lt;/li&gt;
&lt;li&gt;数据通用预处理&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://helloqb.xyz/post/ipynb/0617_func.html&#34;&gt;&amp;lt;html 版本&amp;gt;&lt;/a&gt; &lt;a href=&#34;https://helloqb.xyz/post/ipynb/0617_func.ipynb&#34;&gt;&amp;lt;ipynb 版本&amp;gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;其他&#34;&gt;其他&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Difference between map, applymap and apply methods in Pandas.&lt;/strong&gt; &lt;a href=&#34;https://helloqb.xyz/post/ipynb/0615_df_map.html&#34;&gt;&amp;lt;html 版本&amp;gt;&lt;/a&gt; &lt;a href=&#34;https://helloqb.xyz/post/ipynb/0615_df_map.ipynb&#34;&gt;&amp;lt;ipynb 版本&amp;gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
- https://helloqb.xyz/post/2020/0615_jupyter/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>个人笔记 - 正则表达式</title>
        <link>https://helloqb.xyz/post/2020/0605_regex/</link>
        <pubDate>Fri, 05 Jun 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0605_regex/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0605_regex/ -&lt;h1 id=&#34;介绍&#34;&gt;介绍&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;正则表达式（Regex）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。 &amp;ndash; &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F&#34;&gt;维基百科&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;jupyter-版&#34;&gt;Jupyter 版&lt;/h1&gt;
&lt;p&gt;例子在 Jupyter Notebook 中展示更清晰些，所以就直接上传了 Jupyter 版本的。&lt;a href=&#34;https://helloqb.xyz/post/ipynb/0605_regex.html&#34;&gt;&amp;lt;html版本&amp;gt;&lt;/a&gt; &lt;a href=&#34;https://helloqb.xyz/post/ipynb/0605_regex.ipynb&#34;&gt;&amp;lt;原始版本&amp;gt;&lt;/a&gt;&lt;/p&gt;
&lt;iframe src=&#34;https://helloqb.xyz/post/ipynb/0605_regex.html&#34; style=&#34;width:100%;height:600px;border:0px&#34;&gt;这是A&lt;/iframe&gt;
&lt;h1 id=&#34;用法&#34;&gt;用法&lt;/h1&gt;
&lt;h2 id=&#34;文本编辑器替换&#34;&gt;文本编辑器替换&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;$1&lt;/code&gt; 代替某一组。&lt;/p&gt;
&lt;p&gt;如替换隐藏手机号中间四位，查找正则为 &lt;code&gt;(\d{3})(\d*)(\d{4})&lt;/code&gt;，替换为 &lt;code&gt;$1****$3&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;Java 端也采用此方法。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;// 手机号隐藏中间4位：
&lt;/span&gt;&lt;span style=&#34;color:#408080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;static&lt;/span&gt; String &lt;span style=&#34;color:#00f&#34;&gt;hidePhone&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;String phone&lt;span style=&#34;color:#666&#34;&gt;){&lt;/span&gt;
  &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;return&lt;/span&gt; phone&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#7d9029&#34;&gt;replaceAll&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;(\\d{3})(\\d*)(\\d{4})&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ba2121&#34;&gt;&amp;#34;$1****$3&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;);&lt;/span&gt;
&lt;span style=&#34;color:#666&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;常用正则表达式&#34;&gt;常用正则表达式&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;中文&lt;/strong&gt;：&lt;code&gt;[\u4e00-\u9fa5]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;匹配某个字符在最后一次出现的位置&lt;/strong&gt;：&lt;code&gt;[^字符]+$&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;匹配不在引号里的逗号&lt;/strong&gt;：&lt;code&gt;,(?=([^\&amp;quot;&#39;]*[\&amp;quot;&#39;][^\&amp;quot;&#39;]*[\&amp;quot;&#39;])*[^\&amp;quot;&#39;]*$)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;概括字符集&#34;&gt;概括字符集&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;字符&lt;/th&gt;
&lt;th&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\d&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;[0-9]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\D&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;[^0-9]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\w&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;[A-Za-z0-9_]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\W&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;[^A-Za-z0-9_]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\s&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;空白字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\S&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;非空白字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;. &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配除换行符&lt;code&gt;\n&lt;/code&gt;之外其他所有字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\t&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配 TAB 键&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;推荐&#34;&gt;推荐&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://regexper.com/&#34;&gt;regexper&lt;/a&gt; 这个网站可以帮助你更直观的展示正则表达式的逻辑。&lt;/p&gt;
- https://helloqb.xyz/post/2020/0605_regex/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>EXCEL 技巧之 - VLOOKUP 函数</title>
        <link>https://helloqb.xyz/post/2020/0604_vlookup/</link>
        <pubDate>Thu, 04 Jun 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0604_vlookup/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0604_vlookup/ -&lt;p&gt;VLOOKUP 可以实现类似数据库的 &lt;code&gt;LEFT JOIN&lt;/code&gt; 操作。&lt;/p&gt;
&lt;h1 id=&#34;官方文档&#34;&gt;官方文档&lt;/h1&gt;
&lt;p&gt;VLOOKUP（查阅值、包含查阅值的区域、包含返回值的区域中的列号、近似匹配（TRUE）或完全匹配（FALSE））。其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;要查找的值，也被称为查阅值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查阅值所在的区域。 请记住，查阅值应该始终&lt;em&gt;&lt;strong&gt;位于所在区域的第一列&lt;/strong&gt;&lt;/em&gt;，这样 VLOOKUP 才能正常工作。 例如，如果查阅值位于单元格 C2 内，那么您的区域应该以 C 开头。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;区域中包含返回值的列号。 例如，如果指定 B2： D11 作为区域，则应将 B 作为第一列，将 C 作为第二列进行计数，依此类推。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;（可选）如果需要返回值的近似匹配，可以指定 TRUE；如果需要返回值的精确匹配，则指定 FALSE。 如果没有指定任何内容，默认值将始终为 TRUE 或近似匹配。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;实现&#34;&gt;实现&lt;/h1&gt;
&lt;p&gt;如下表格，想要知道左边哪些是已婚人士。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://21fnqa.dm.files.1drv.com/y4mxHOexyJpSInaOXFQ-H74qmhCXFiBSSZhKeDcOsl9Az95dc0BGgwvQaDCMNjqzbUMZNhwYclDPKYUtaKfBbRjomBuDLL1zQNtY1WchbEey-5TQVzERl9HPTXPUBDSx6yYgnUdqV7Z2JlL-wNTMX7o_lBmzW23zVifaXUS6S0RSsYDMhfmzOZ3eJOGLyXn7DX4M02UvjS1dV-xeHpDuYlUxg?width=612&amp;height=291&amp;cropmode=none&#34; /&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;1. 输入 VLOOKUP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在上表 2B 单元格内输入 &lt;code&gt;=VLOOKUP(&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 选择查找值&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;括号后第一个参数选中 2A，然后输入英文逗号。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3ffnqa.dm.files.1drv.com/y4mNWqmpXbuJknhmxYTy_6wlJyY9U13gY1WfQ0K7IUBk67ok4Y9U9lKKXGLMeJsNtuZfrxlBkXgcixQA4uDIZ28cO5WvIg1ao_nZ9XlsLEoZH52wsl0AcvPrzWWx_STSMIB4aRTUSI7SZdBOz-HLVjecHAMkgpyhnvt4jTL8RqianLgZXNdsu8uDIgja_E4m6P2lwZtMzS_6S9AQFG6I6QqAg?width=612&amp;height=297&amp;cropmode=none&#34; /&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;3. 选择查找区域&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;括号后第二个参数选中 F:G 列，然后输入英文逗号。&lt;/p&gt;
&lt;p&gt;如果不选中整列，而是只是选中有数据部分如 F2:G4 列，则后续下拉拖动方式此参数会随之变化，导致没有得出想要的结果。&lt;/p&gt;
&lt;p&gt;全选时注意首行会不会影响结果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3vfnqa.dm.files.1drv.com/y4m4xJvHy47-M1nmcu3d0c8PIOeuhzo-PFvKCjN9rcvxHRMMdJVLFb49TWk6aaDd2w23xWBBop85GmvfLRFs0HdWn8mnTTI8TGect2__N1zLMF2uTGQcCWSkVGNX9aYngUMK2tyRiY2DC7Quh9NYHzwk_4cT8L_VVNo-MpGJJFW13UvEUSpHzfaFZwFYmPjnIACoTBC1BDAAc8cfjr3vfOGRg?width=611&amp;height=302&amp;cropmode=none&#34; /&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;4. 其他参数&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;第三个参数是匹配查阅区域的第几列，最后为是否精确匹配。&lt;/p&gt;
&lt;p&gt;最后整个公式为 &lt;code&gt;=VLOOKUP(A2,F:G,1,FALSE)&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5. 复制公式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;此时只是第一个单元格的结果，采用下拉拖动方式或者复制粘贴方式将公式复制到列中其他的单元格中。这两种方式粘贴的公式都会行自动变化。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://5lfnqa.dm.files.1drv.com/y4mmnfyHw_FLNQj4R4aZvCCz1zo5gm_tUTISAXTtyrtCBOn6BB-OsJ_N7XDgvtn_E92SQUNP5p6mHfOrOQ48qJQZl5f1-nw63LF78eq2oXFfF-2QHXfXEosGmFmYqwQt7OuJqYrI4vWXacKAFwG9sep5O2D1uerTu8ztzsAKl6POmj94eap3T2BDN5wpF91CC02TKjwwqcwoc-nRUz7dpP0VQ?width=617&amp;height=303&amp;cropmode=none&#34; /&gt;&lt;p&gt;
&lt;p&gt;&lt;strong&gt;6. 获取其他单元格&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;第二列数据改下第三个参数为 2 就行了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://51fnqa.dm.files.1drv.com/y4m5hJfOGKRBm0nH7DWHQ0k_OJdmD7urFWDHjBE_eGtteA258Il5XP8L6MObW1uiYnQ1sDBDg6emSnoEapzZJqUmewielL1VawozZqR0G301koXwa0ayLyF6EoOczHQ6MhePa8l8Pv4wjggDm_siB9Z2vB4B99-Wev7R-Z07tec4pDokMVm_aP3fp0uOIFTkNl088UcDi1DAwcdOmbB-Vnosg?width=617&amp;height=301&amp;cropmode=none&#34; /&gt;&lt;p&gt;
- https://helloqb.xyz/post/2020/0604_vlookup/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>EXCEL 技巧之 - 相同单元格合并</title>
        <link>https://helloqb.xyz/post/2020/0604_merge/</link>
        <pubDate>Thu, 04 Jun 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0604_merge/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0604_merge/ -&lt;h1 id=&#34;需求&#34;&gt;需求&lt;/h1&gt;
&lt;p&gt;需求其实很简单，就是合并单元格，行数少的情况下一个一个点就行了，但是行数多的情况下就麻烦了，秉承着重复性工作一定能被计算机代替的想法，翻阅很久找到了方法，在此分享。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://31gyyw.dm.files.1drv.com/y4miPbLToyX_QudE2Tuhmf-khEmDqEgh9fO4pFq0SYcisR1bTjfqH2aCXLjOFDh-HL1TmNx2iNtba7qxK0yPJJJlK-KTQXTu9gdsI7hWYyDTIbKiiG6yKNge3h3DeJ-Iv9uhRPIJBC4KuEOCYUsq_KugpmcsbB36lc5TWJCluEdkX9QNSsSzcqJMrsYzP3etq3SxIOtrSmUsKYb16JKfo8EHQ?width=418&amp;height=251&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;实现&#34;&gt;实现&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;1. 数据（菜单栏） -&amp;gt; 分类汇总&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;分类字段：需要合并的列，本例中为身份；&lt;/li&gt;
&lt;li&gt;汇总方式：无关，默认即可；&lt;/li&gt;
&lt;li&gt;选定汇总项：同分类字段；&lt;/li&gt;
&lt;li&gt;替换当前分类汇总：无关，默认即可；&lt;/li&gt;
&lt;li&gt;每组数据分页：不选；&lt;/li&gt;
&lt;li&gt;汇总结果显示在数据下方：选中&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://4fgyyw.dm.files.1drv.com/y4mdpA_mKe7ja74RTuqL3uh6TVetdvqyrTMtmia7YX4_6nUZPEvw_OgFgcWhFuEVsruWR0_56NWOATP2D7Ypv_lWI82CKo-FzQYNn167XegYxcwzls21vwln0Vzea-OPHYCEmLZK9II7Zlzw1SlXn4cMZO_BQ6sVTZk3TIN6Sh1rFirSuM-FrBgIc0YTQtB9X8vcgP-F5z1FzLuqLw88McQNA?width=433&amp;height=312&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 汇总列合并空值单元格&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对生成的汇总列进行空值定位，并合并空值单元格。操作如下：&lt;/p&gt;
&lt;p&gt;汇总列第一行填 1 -&amp;gt; 选中汇总列 -&amp;gt; 开始(菜单栏) -&amp;gt; 查找和选择 -&amp;gt; 定位条件：空值 -&amp;gt; 合并后居中&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://4vgyyw.dm.files.1drv.com/y4mz2_puQ_ai1GR6rARu-HVgdPFj_4ceRrcYzlFjRhqwCEfPeEAEwCa3hs1eeEUbZdYurpF9uHtVgb3I8J48mL0DKeJXLfdk52LyTYC2HZSmDBjPJ4uapvMYEjQTTJKWoa3pXCAp5JLm2EB-j1wbf-8m0xJBQcqw2ovTefKKMGsOvmYw_PfMiAQbS7T_qXDbfYM0CDZraANizNt4e3ML7Gl_A?width=407&amp;height=310&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 间隔一行（非必须）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果想要每一类间隔一行的话，使用操作 2 的步骤定位合并列（定位条件：数值）然后插入工作表行就行了。&lt;/p&gt;
&lt;p&gt;提一下这个是觉得定位这个功能很强大的样子，类似于编辑器中的多光标选择。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. 格式刷合并列&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;将汇总列格式刷到合并列。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://2lgyyw.dm.files.1drv.com/y4mGGjq5crcBI8VL6sKd_ziCMDNdO2PE40DtdIu7xmTb3N6oILfZPXOgy5Hyjlnw_ZIQUZYbBiIUzTQuDCpmO7yokxxpO_XN7E64ci08ry0w_zN4VRAXJ1RRub8YXV1xpng9rc9237_sIpkQ7S30n64ZT7NgvtmciVXMDjZHwKGMi8OLoyw7IwDDftrMHxDCoa8_fZauumwWM2KQ5mn3oQsfg?width=400&amp;height=297&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. 删除分类汇总&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;数据（菜单栏） -&amp;gt; 分类汇总 -&amp;gt; 全部删除。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://21gyyw.dm.files.1drv.com/y4munMdjMvbfIdvLd7d35jz9kCrHmlhQtr3nUkUM6rjiSIbxzP8vn8Hn2ZL-Nxfz9HAvno1zWdG50vFVEMzZuEfvpOM0d0x72_DH7t-wnmGeGJRgTI-pT0tn7ll3olFqYWoA0pUCC_8DZjDC__A5gcEq3MiK4FkbTYswFrSe3JuREKe35ty_mJO2sSTSwpq0B9Nuv7gsYpheOZcVlsRHE2vFg?width=289&amp;height=240&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
- https://helloqb.xyz/post/2020/0604_merge/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>四宫格办公壁纸制作</title>
        <link>https://helloqb.xyz/post/2020/0603_ps/</link>
        <pubDate>Wed, 03 Jun 2020 00:00:00 +0000</pubDate>
        
        <guid>https://helloqb.xyz/post/2020/0603_ps/</guid>
        <description>哲学家 https://helloqb.xyz/post/2020/0603_ps/ -&lt;h1 id=&#34;介绍&#34;&gt;介绍&lt;/h1&gt;
&lt;p&gt;以 Windows 自带纯色壁纸为基础，效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://31fnqa.dm.files.1drv.com/y4mPFyoM3lP_9rd-Vg1cstN75iwI2bXFcYyD5EMT5aYeMND199Uhbo3TvKSX3El_yT2DiiMLWbIDIJE5dg-IwNhjllVzxi97yPpFr7Zx9P_lczOSDYxdcnQ77ncpsezH6ITvxZtrdWUaYA7nyfZz2kr9dExDSJEmVKtPtg0TZdkmBCfHZzlHd4aPegP-keRBvZM6Tls9In5rRGjGrhjDGxzBA?width=1920&amp;height=1038&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;流程&#34;&gt;流程&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;1. 用 Photoshop 打开壁纸&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;个人喜欢纯色壁纸，Windows10 上可通过背景设置为纯色壁纸后截屏得到。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://21hota.dm.files.1drv.com/y4mPZtvaCaLpHRBmtv3Dp5g0aNBFwpE3svq99M08Fa71_52A_4Kj2p3EpbDuzidrBnEsCOPUPXczsofo3HBsbmkv-ErqUB99uuM2HugEpfxNiaGTgiZG_FP5Maja1ass_fzQraojiYrduDrx7RaXv3eieRoVRlrKCTkDdX2IFipPEeexA4NdZbbqzVxoJw237bpqfqgmqHIUT3tOT2s1vqFvQ?width=1920&amp;height=1040&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. 新建图层并填充为白色&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;操作： 图层（菜单栏）-&amp;gt; 新建 -&amp;gt; 图层 -&amp;gt; 编辑（菜单栏）-&amp;gt; 填充 -&amp;gt; 背景色&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3fhota.dm.files.1drv.com/y4meK5ev_0gzQVGaO-s8pRyhSqRaLkuHZegnssv6K68sWs1r1lZ_wW9OXu7xO9zSaHe-kTG-mvcHMn8bGYOP28ZlOfEKCBFALcgP_50f0n5y-DQLuTTG6-I_zDvqnBWD_jCOVYTjZcseoEtpq-HIMxw0G4AloLnhk9dMe6LJ4JkOhPqm2dTV5lffC-NQ-H4WJ55fpEJWAZw2AiIsThnRoPfIQ?width=1914&amp;height=1040&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. 缩小一半长宽比&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;操作：编辑（菜单栏）-&amp;gt; 自由变换 -&amp;gt; W:49% H:49%&lt;/p&gt;
&lt;p&gt;49% 也就是留了 2% 的缝隙，可根据自己喜好修改。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3vhota.dm.files.1drv.com/y4mdd-w-RhQf8xV47ASDL01uDZ7wgQD_232jOUsAEyOxD1LIMeFo-0x-2ZGjS2ifpZKdVe7R3DNNe9TZxysD47udWnW-sqdrx4sC03UHddtx39yTOmG5rGm7NTg5UpaQ4ADzbkYMADlDHj0Z2btDus7ULMk2zn4vuvZxzNpRwJxwjO_1PrFduCGrslPWa09qrOghIIUDhb4Ik4OlhqHpkWY4A?width=1920&amp;height=1040&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. 切割图层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;以变换后的图层作为选区，分别左上、左下、右上、右下复制图层。&lt;/p&gt;
&lt;p&gt;操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对齐：选中两个图层，点击菜单栏图层里的对齐，左对齐，然后再顶部对齐；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://4ffnqa.dm.files.1drv.com/y4mlbXCFCPRabp5uAMcIbDFM4Refu91x1X6PhlMS_xW7rT8VLgZPdVJr2446AKpxC1IyOyBy3xKYj3Y0lYdcpzTo-n5gpy2Gnvq1VfYlosOWJSI3U9HKM_lq9c6eDxeS9P4gAY_2Tew34suApC9UJCrDMa3PFjkcDA4eMLP2DCSzItZQid_LlBR8AOe0RQGLfMM_5KqEcsxA_OvccOWFTxe2Q?width=1920&amp;height=1039&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;载入选区：按住 &lt;code&gt;Ctrl&lt;/code&gt;，并点击白色图层的缩略图；&lt;/li&gt;
&lt;li&gt;复制图层：点击背景图层，点击 &lt;code&gt;Ctrl + J&lt;/code&gt;，将所选区域复制到新图层中；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://4vfnqa.dm.files.1drv.com/y4mebgrRn4sXRat0i8ikv7xk8sTkINQmXcAHgYoPs5COlZfnMgtXebQYDCzdZlju-C7fJNKpEw4MkViU46Tjr7W8A6hbJSWkiUVPDw-uWD17hOw0S8GTG5FnaUn21S9WlJ0cY9WhFMtyU9PFv6Lb_nA8jJbTwguMpjEKzHRqeoblBr-iUyq9_uyZeGTKToSvL96H9kF-sX2gIZuptCC2oqECg?width=1920&amp;height=1038&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;同样方式左下、右上、右下生成另外三个图层；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://5lhota.dm.files.1drv.com/y4mSmzC0rmXrJCRQGZKM7DCF7vmmcw9iVQnjYp-d82IPsChzBX-aWqOW4DbUt2EHjROM6x9p4fsOo2lGs1FNX5-bMxGn6q2muR5C8kr1O7xoAg1pTni4YGDYjQkinxFT2nLoTRaxlXn90wEq9V9Dqf4AyXlim0zkKXqLkKoYjZCLtVGkIxTPTFgw-ZCTJgVJAuy0hr7rt7oULJkVzLNsR8ELw?width=1920&amp;height=1038&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5. 增加图层样式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;双击图层打开图层样式，选择投影，距离和大小设置为 20 像素；&lt;/li&gt;
&lt;li&gt;右键图层拷贝图层样式，然后复制到另外三个图层中；&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;大功告成，当然可根据自己喜好选择样式，添加相关文字等。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://51hota.dm.files.1drv.com/y4m5etRuVzlJgeR9p7lFrGdFuTvyPjAyaJvx50_mmJhYBXwq6qD87LfDvLnAY24Lb7eUvhqv9E0EVuJL1PZxIgqlsHiPjOUt7oQfmzs3Dwwzxe7pzgL1YhIFCs1eQmwLkgPVwkwwNSNUuCOJx55bLCpVADcF0xryHRgVQYTucl8vFB5tt6-W2g-Pk1xKz9BcFmWSuRE__6WUuSxKbAVGVZVXQ?width=1919&amp;height=1039&amp;cropmode=none&#34; /&gt;&lt;/p&gt;
- https://helloqb.xyz/post/2020/0603_ps/ - ©DRay. 本站遵循 CC-BY-NC 4.0 协议</description>
        </item>
    
    
  </channel>
</rss> 